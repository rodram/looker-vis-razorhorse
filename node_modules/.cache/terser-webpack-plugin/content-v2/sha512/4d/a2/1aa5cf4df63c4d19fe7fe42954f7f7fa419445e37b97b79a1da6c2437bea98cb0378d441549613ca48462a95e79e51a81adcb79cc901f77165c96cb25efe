{"map":"{\"version\":3,\"sources\":[\"treemap.js\"],\"names\":[\"modules\",\"installedModules\",\"__webpack_require__\",\"moduleId\",\"exports\",\"module\",\"i\",\"l\",\"call\",\"m\",\"c\",\"d\",\"name\",\"getter\",\"o\",\"Object\",\"defineProperty\",\"enumerable\",\"get\",\"r\",\"Symbol\",\"toStringTag\",\"value\",\"t\",\"mode\",\"__esModule\",\"ns\",\"create\",\"key\",\"bind\",\"n\",\"object\",\"property\",\"prototype\",\"hasOwnProperty\",\"p\",\"s\",\"looker\",\"plugins\",\"visualizations\",\"add\",\"id\",\"label\",\"options\",\"color_range\",\"type\",\"display\",\"default\",\"element\",\"config\",\"this\",\"_svg\",\"d3v4\",\"select\",\"append\",\"update\",\"data\",\"queryResponse\",\"handleErrors\",\"min_pivots\",\"max_pivots\",\"min_dimensions\",\"max_dimensions\",\"undefined\",\"min_measures\",\"max_measures\",\"d3\",\"width\",\"clientWidth\",\"height\",\"clientHeight\",\"dimensions\",\"fields\",\"dimension_like\",\"measure\",\"measure_like\",\"format\",\"formatType\",\"value_format\",\"color\",\"scaleOrdinal\",\"range\",\"forEach\",\"row\",\"taxonomy\",\"map\",\"dim\",\"treemap\",\"size\",\"tile\",\"treemapSquarify\",\"ratio\",\"paddingOuter\",\"paddingTop\",\"depth\",\"paddingInner\",\"round\",\"svg\",\"html\",\"attr\",\"breadcrumb\",\"root\",\"hierarchy\",\"table\",\"obj\",\"layer\",\"__data\",\"descend\",\"arr\",\"k\",\"child\",\"children\",\"push\",\"burrow\",\"sum\",\"cell\",\"selectAll\",\"descendants\",\"enter\",\"x0\",\"y0\",\"style\",\"on\",\"console\",\"log\",\"ancestors\",\"text\",\"slice\",\"reverse\",\"join\",\"filter\",\"indexOf\",\"scaleLinear\",\"domain\",\"x1\",\"y1\",\"scale\"],\"mappings\":\"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\"}","code":"!function(t){var e={};function n(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var a in t)n.d(r,a,function(e){return t[e]}.bind(null,a));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,\"a\",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p=\"\",n(n.s=0)}([function(t,e){looker.plugins.visualizations.add({id:\"treemap\",label:\"Treemap\",options:{color_range:{type:\"array\",label:\"Color Range\",display:\"colors\",default:[\"#dd3333\",\"#80ce5d\",\"#f78131\",\"#369dc1\",\"#c572d3\",\"#36c1b3\",\"#b57052\",\"#ed69af\"]}},create:function(t,e){this._svg=d3v4.select(t).append(\"svg\")},update:function(t,e,n,r){if(!handleErrors(this,r,{min_pivots:0,max_pivots:0,min_dimensions:1,max_dimensions:void 0,min_measures:1,max_measures:1}))return;let a=d3v4,i=e.clientWidth,o=e.clientHeight,u=r.fields.dimension_like,l=r.fields.measure_like[0],c=formatType(l.value_format),d=a.scaleOrdinal().range(n.color_range);t.forEach((function(t){t.taxonomy=u.map((function(e){return t[e.name].value}))}));let s=a.treemap().size([i,o-16]).tile(a.treemapSquarify.ratio(1)).paddingOuter(1).paddingTop((function(t){return 1==t.depth?16:0})).paddingInner(1).round(!0),f=this._svg.html(\"\").attr(\"width\",\"100%\").attr(\"height\",\"100%\").append(\"g\").attr(\"transform\",\"translate(0,16)\"),p=f.append(\"text\").attr(\"y\",-5).attr(\"x\",4),m=a.hierarchy(function(t){let e={};t.forEach((function(t){let n=e;t.taxonomy.forEach((function(t){n[t]=t in n?n[t]:{},n=n[t]})),n.__data=t}));let n=function(t,e){let r=[];e=e||0;for(let a in t){if(\"__data\"==a)continue;let i={name:a,depth:e,children:n(t[a],e+1)};\"__data\"in t[a]&&(i.data=t[a].__data),r.push(i)}return r};return{name:\"root\",children:n(e,1),depth:0}}(t)).sum((function(t){return\"data\"in t?t.data[l.name].value:0}));s(m);let h=f.selectAll(\".node\").data(m.descendants()).enter().append(\"g\").attr(\"transform\",(function(t){return\"translate(\"+t.x0+\",\"+t.y0+\")\"})).attr(\"class\",(function(t,e){return\"node depth-\"+t.depth})).style(\"stroke-width\",1.5).style(\"cursor\",\"pointer\").on(\"click\",(function(t){console.log(t)})).on(\"mouseenter\",(function(t){let e=t.ancestors();p.text(e.map((function(t){return t.data.name})).slice(0,-1).reverse().join(\"-\")+\": \"+c(t.value)),f.selectAll(\"g.node rect\").style(\"stroke\",null).filter((function(t){return e.indexOf(t)>-1})).style(\"stroke\",(function(e){a.scaleLinear().domain([1,12]).range([d(t.ancestors().map((function(t){return t.data.name})).slice(-2,-1)),\"#ddd\"]);return\"#fff\"}))})).on(\"mouseleave\",(function(t){p.text(\"\"),f.selectAll(\"g.node rect\").style(\"stroke\",(function(t){return null}))}));h.append(\"rect\").attr(\"id\",(function(t,e){return\"rect-\"+e})).attr(\"width\",(function(t){return t.x1-t.x0})).attr(\"height\",(function(t){return t.y1-t.y0})).style(\"fill\",(function(t){if(0==t.depth)return\"none\";return a.scaleLinear().domain([1,6.5]).range([d(t.ancestors().map((function(t){return t.data.name})).slice(-2,-1)),\"#ddd\"])(t.depth)})),h.append(\"clipPath\").attr(\"id\",(function(t,e){return\"clip-\"+e})).append(\"use\").attr(\"xlink:href\",(function(t,e){return\"#rect-\"+e}));h.append(\"text\").style(\"opacity\",(function(t){return 1==t.depth?1:0})).attr(\"clip-path\",(function(t,e){return\"url(#clip-\"+e+\")\"})).attr(\"y\",(function(t){return 1==t.depth?\"13\":\"10\"})).attr(\"x\",2).style(\"font-family\",\"Helvetica, Arial, sans-serif\").style(\"fill\",\"white\").style(\"font-size\",(function(t){return 1==t.depth?\"14px\":\"10px\"})).text((function(t){return\"root\"==t.data.name?\"\":t.data.name}))}})}]);","extractedComments":[]}