{"map":"{\"version\":3,\"sources\":[\"treemap.js\"],\"names\":[\"modules\",\"installedModules\",\"__webpack_require__\",\"moduleId\",\"exports\",\"module\",\"i\",\"l\",\"call\",\"m\",\"c\",\"d\",\"name\",\"getter\",\"o\",\"Object\",\"defineProperty\",\"enumerable\",\"get\",\"r\",\"Symbol\",\"toStringTag\",\"value\",\"t\",\"mode\",\"__esModule\",\"ns\",\"create\",\"key\",\"bind\",\"n\",\"object\",\"property\",\"prototype\",\"hasOwnProperty\",\"p\",\"s\",\"d3v4\",\"e\",\"Error\",\"code\",\"formatType\",\"valueFormat\",\"x\",\"format\",\"charAt\",\"indexOf\",\"splitValueFormat\",\"split\",\"length\",\"slice\",\"d3\",\"looker\",\"plugins\",\"visualizations\",\"add\",\"id\",\"label\",\"options\",\"color_range\",\"type\",\"display\",\"default\",\"element\",\"config\",\"this\",\"_svg\",\"select\",\"append\",\"update\",\"data\",\"queryResponse\",\"vis\",\"resp\",\"messageFromLimits\",\"min\",\"max\",\"field\",\"message\",\"fields\",\"pivots\",\"min_pivots\",\"max_pivots\",\"addError\",\"group\",\"title\",\"clearErrors\",\"dimensions\",\"min_dimensions\",\"max_dimensions\",\"measure_like\",\"min_measures\",\"max_measures\",\"handleErrors\",\"undefined\",\"width\",\"clientWidth\",\"height\",\"clientHeight\",\"dimension_like\",\"measure\",\"value_format\",\"color\",\"scaleOrdinal\",\"range\",\"forEach\",\"row\",\"taxonomy\",\"map\",\"dim\",\"treemap\",\"size\",\"tile\",\"treemapSquarify\",\"ratio\",\"paddingOuter\",\"paddingTop\",\"depth\",\"paddingInner\",\"round\",\"svg\",\"html\",\"attr\",\"breadcrumb\",\"root\",\"hierarchy\",\"table\",\"obj\",\"layer\",\"__data\",\"descend\",\"arr\",\"k\",\"child\",\"children\",\"push\",\"burrow\",\"sum\",\"cell\",\"selectAll\",\"descendants\",\"enter\",\"x0\",\"y0\",\"style\",\"on\",\"console\",\"log\",\"ancestors\",\"text\",\"reverse\",\"join\",\"filter\",\"scaleLinear\",\"domain\",\"x1\",\"y1\",\"scale\"],\"mappings\":\"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\"}","code":"!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=0)}([function(e,t,n){const r=n(!function(){var e=new Error(\"Cannot find module './d3v4.js'\");throw e.code=\"MODULE_NOT_FOUND\",e}());function i(e){if(\"string\"!=typeof e)return function(e){return e};let t=\"\";switch(e.charAt(0)){case\"$\":t+=\"$\";break;case\"£\":t+=\"£\";break;case\"€\":t+=\"€\"}switch(e.indexOf(\",\")>-1&&(t+=\",\"),splitValueFormat=e.split(\".\"),t+=\".\",t+=splitValueFormat.length>1?splitValueFormat[1].length:0,e.slice(-1)){case\"%\":t+=\"%\";break;case\"0\":t+=\"f\"}return d3.format(t)}looker.plugins.visualizations.add({id:\"treemap\",label:\"Treemap\",options:{color_range:{type:\"array\",label:\"Color Range\",display:\"colors\",default:[\"#dd3333\",\"#80ce5d\",\"#f78131\",\"#369dc1\",\"#c572d3\",\"#36c1b3\",\"#b57052\",\"#ed69af\"]}},create:function(e,t){this._svg=r.select(e).append(\"svg\")},update:function(e,t,n,a){if(!function(e,t,n){function r(e,t,n){let r=\"You need \"+e;return t&&(r+=\" to \"+t),r+=\" \"+n,r}if(t.fields.pivots.length<n.min_pivots||t.fields.pivots.length>n.max_pivots){return e.addError({group:\"pivot-req\",title:\"Incompatible Pivot Data\",message:r(n.min_pivots,n.max_pivots,\"pivots\")}),!1}return e.clearErrors(\"pivot-req\"),t.fields.dimensions.length<n.min_dimensions||t.fields.dimensions.length>n.max_dimensions?(e.addError({group:\"dim-req\",title:\"Incompatible Dimension Data\",message:r(n.min_dimensions,n.max_dimensions,\"dimensions\")}),!1):(e.clearErrors(\"dim-req\"),t.fields.measure_like.length<n.min_measures||t.fields.measure_like.length>n.max_measures?(e.addError({group:\"mes-req\",title:\"Incompatible Measure Data\",message:r(n.min_measures,n.max_measures,\"measures\")}),!1):(e.clearErrors(\"mes-req\"),!0))}(this,a,{min_pivots:0,max_pivots:0,min_dimensions:1,max_dimensions:void 0,min_measures:1,max_measures:1}))return;let o=r,s=t.clientWidth,l=t.clientHeight,u=a.fields.dimension_like,d=a.fields.measure_like[0],c=i(d.value_format),f=o.scaleOrdinal().range(n.color_range);e.forEach((function(e){e.taxonomy=u.map((function(t){return e[t.name].value}))}));let p=o.treemap().size([s,l-16]).tile(o.treemapSquarify.ratio(1)).paddingOuter(1).paddingTop((function(e){return 1==e.depth?16:0})).paddingInner(1).round(!0),m=this._svg.html(\"\").attr(\"width\",\"100%\").attr(\"height\",\"100%\").append(\"g\").attr(\"transform\",\"translate(0,16)\"),h=m.append(\"text\").attr(\"y\",-5).attr(\"x\",4),_=o.hierarchy(function(e){let t={};e.forEach((function(e){let n=t;e.taxonomy.forEach((function(e){n[e]=e in n?n[e]:{},n=n[e]})),n.__data=e}));let n=function(e,t){let r=[];t=t||0;for(let i in e){if(\"__data\"==i)continue;let a={name:i,depth:t,children:n(e[i],t+1)};\"__data\"in e[i]&&(a.data=e[i].__data),r.push(a)}return r};return{name:\"root\",children:n(t,1),depth:0}}(e)).sum((function(e){return\"data\"in e?e.data[d.name].value:0}));p(_);let g=m.selectAll(\".node\").data(_.descendants()).enter().append(\"g\").attr(\"transform\",(function(e){return\"translate(\"+e.x0+\",\"+e.y0+\")\"})).attr(\"class\",(function(e,t){return\"node depth-\"+e.depth})).style(\"stroke-width\",1.5).style(\"cursor\",\"pointer\").on(\"click\",(function(e){console.log(e)})).on(\"mouseenter\",(function(e){let t=e.ancestors();h.text(t.map((function(e){return e.data.name})).slice(0,-1).reverse().join(\"-\")+\": \"+c(e.value)),m.selectAll(\"g.node rect\").style(\"stroke\",null).filter((function(e){return t.indexOf(e)>-1})).style(\"stroke\",(function(t){o.scaleLinear().domain([1,12]).range([f(e.ancestors().map((function(e){return e.data.name})).slice(-2,-1)),\"#ddd\"]);return\"#fff\"}))})).on(\"mouseleave\",(function(e){h.text(\"\"),m.selectAll(\"g.node rect\").style(\"stroke\",(function(e){return null}))}));g.append(\"rect\").attr(\"id\",(function(e,t){return\"rect-\"+t})).attr(\"width\",(function(e){return e.x1-e.x0})).attr(\"height\",(function(e){return e.y1-e.y0})).style(\"fill\",(function(e){if(0==e.depth)return\"none\";return o.scaleLinear().domain([1,6.5]).range([f(e.ancestors().map((function(e){return e.data.name})).slice(-2,-1)),\"#ddd\"])(e.depth)})),g.append(\"clipPath\").attr(\"id\",(function(e,t){return\"clip-\"+t})).append(\"use\").attr(\"xlink:href\",(function(e,t){return\"#rect-\"+t}));g.append(\"text\").style(\"opacity\",(function(e){return 1==e.depth?1:0})).attr(\"clip-path\",(function(e,t){return\"url(#clip-\"+t+\")\"})).attr(\"y\",(function(e){return 1==e.depth?\"13\":\"10\"})).attr(\"x\",2).style(\"font-family\",\"Helvetica, Arial, sans-serif\").style(\"fill\",\"white\").style(\"font-size\",(function(e){return 1==e.depth?\"14px\":\"10px\"})).text((function(e){return\"root\"==e.data.name?\"\":e.data.name}))}})}]);","extractedComments":[]}